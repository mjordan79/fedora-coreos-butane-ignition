{
  "ignition": {
    "version": "3.4.0"
  },
  "passwd": {
    "users": [
      {
        "groups": [
          "wheel",
          "sudo",
          "docker"
        ],
        "homeDir": "/home/mjordan",
        "name": "mjordan",
        "noCreateHome": false,
        "passwordHash": "$y$j9T$8leCHKjDXk5Ne2.SraPgN.$HbST8G0cp1a9EVQIAgWodJ07zG/4IpUPtAMpJcdO118",
        "sshAuthorizedKeys": [
          "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDoeY8qlfz9kW84ZwkMwQqFTfhDDc5zkBWuFZ7Q9m9TAac01ImqhNIF05Q4vxQcfp9z9fBjtqTQjTe8joXfE5o+LTT8jPkNcMF9857oH0IAlWx1wDq9cuAiXsrFW7zRw59FTURAXw6CDih0ykfB4K4zFuLq2PHqT9i0Ra+PKPKL0jjzaZMHyQmobXjML5s/2b2tfEs+4HOdxe3YNzdl0ExmdyIedTvDo/t1ObKwFw8bVd8g+9MOgeAA3RRIG6yrvb7Q9eLOCUtbQC+iei7n3CFdY6P9n0H/zckIyEmX21igZJeqj4khjN7+OfQJ1+xVG+HB7chYw4J/y34s4y9lo9UO2cGWmFxvmUlO1wjJmLAfwJCoDOJe2WUwnBNBS8/YvACCHexiMQm7/ENeCgY7NchAMFlnxs8Dq7bh2qavDdftXvyR4xCfO1XVD+sTi8DKMp4qiYc/iU+iRLM1KHwXJuOreVlAP6kxLkvyX2n2ahT+DWUrOviBfHE9dGqQ/etVhX1jSwjcBzAOaNNNvpnBa7lZack3jZocnk2Z4gFTHYwJnD9SQjiXbhdoSjuL7JB7KV1+R1hnwBFtzrK/vV+KnlHDN+AJzXtg98EVei/ozVK+vuG4H6+GE9WNbDZhXeRpwPPrRQLkF9HdC6dGXZa/dxhpgOcQ6jxeh1HggglS1FcI6w=="
        ],
        "shell": "/bin/bash"
      }
    ]
  },
  "storage": {
    "files": [
      {
        "path": "/opt/ignition.json",
        "contents": {
          "source": "http://192.169.0.10/ignition/ignition_flatcar.ign"
        },
        "mode": 420
      },
      {
        "path": "/opt/install.sh",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/2SOsUpEMRBF+3zFFbdQMElhbSeC4B+IRV4y72XccaKZcVXw40VXK+t7D+ecnuSFNS/FOsLsfrU7E1tkj0+8VcQorGTnCLziHrvZHZFecImH4J00AFT7wK2aFxHWDTdSvJaJO9bXdwxFY9unlBCA9bhFPt4RG3KjQ7ZWEBl5PHvmTdl5aHq0oYHE6E9yzVaWH8cvTzMZzQNXuoAOyNCNJpSoUUsBsA9zeqou3w1lEfoPhpURvgIAAP//3r9eFQQBAAA="
        },
        "mode": 511
      },
      {
        "path": "/etc/vconsole.conf",
        "contents": {
          "compression": "",
          "source": "data:,KEYMAP%3Dit"
        },
        "mode": 420
      },
      {
        "path": "/etc/ssh/sshd_config.d/10-custom.conf",
        "contents": {
          "compression": "",
          "source": "data:,X11Forwarding%20no%0AGSSAPIAuthentication%20no%0A"
        }
      },
      {
        "path": "/etc/systemd/network/00-eth0.network",
        "contents": {
          "compression": "",
          "source": "data:,%5BMatch%5D%0AName%3Deth0%0A%0A%5BNetwork%5D%0ADNS%3D8.8.8.8%0AAddress%3D192.169.0.20%2F24%0AGateway%3D192.169.0.1%0A"
        }
      },
      {
        "overwrite": false,
        "path": "/etc/hosts",
        "append": [
          {
            "compression": "gzip",
            "source": "data:;base64,H4sIAAAAAAAC/zK0NNIzNLPUM9AzMlBIy0ksyU0sLkktMtRLyUzPLEnMyStNzkktLdbLLOFCUmqIpNQIv1IjJKXG+JUag5WW5xdlE3SACZJSbA4ABAAA//+0GS4W1wAAAA=="
          }
        ]
      },
      {
        "path": "/etc/hostname",
        "contents": {
          "compression": "",
          "source": "data:,flatmaster1.digitalnucleus.it"
        },
        "mode": 420
      }
    ],
    "links": [
      {
        "path": "/etc/localtime",
        "target": "../usr/share/zoneinfo/Europe/Rome"
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "contents": "[Unit]\nRequires=network-online.target\nAfter=network-online.target\nConditionPathExists=!/var/lib/%N.stamp\n[Service]\nType=oneshot\nTimeoutStartSec=600\nRemainAfterExit=yes\nExecStart=/opt/install.sh\nExecStart=/bin/touch /var/lib/%N.stamp\nExecStart=/bin/systemctl disable installer.service\nExecStart=/bin/systemctl --no-block reboot\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "installer.service"
      }
    ]
  }
}
